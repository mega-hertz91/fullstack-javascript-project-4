import{o as e}from"./chunk-N2sQUAeg.js";import{t}from"./react-BuxZcaYh.js";import{t as n}from"./jsx-runtime-Bstt4sco.js";import{a as r,n as i}from"./DirectionProvider-CWUR5hYm.js";import{t as a}from"./InputBase-CHINeGB7.js";import{t as o}from"./extends-EBIirlLY.js";import{t as s}from"./objectWithoutPropertiesLoose-SFDcdpV3.js";function c(){return typeof process<`u`?`production`:`development`}var l=e(t()),u=l.useLayoutEffect,d=function(e){var t=l.useRef(e);return u(function(){t.current=e}),t},f=function(e,t){if(typeof e==`function`){e(t);return}e.current=t},p=function(e,t){var n=l.useRef();return l.useCallback(function(r){e.current=r,n.current&&f(n.current,null),n.current=t,t&&f(t,r)},[t])},m={"min-height":`0`,"max-height":`none`,height:`0`,visibility:`hidden`,overflow:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`,display:`block`},h=function(e){Object.keys(m).forEach(function(t){e.style.setProperty(t,m[t],`important`)})},g=null,_=function(e,t){var n=e.scrollHeight;return t.sizingStyle.boxSizing===`border-box`?n+t.borderSize:n-t.paddingSize};function v(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),g||(g=document.createElement(`textarea`),g.setAttribute(`tabindex`,`-1`),g.setAttribute(`aria-hidden`,`true`),h(g)),g.parentNode===null&&document.body.appendChild(g);var i=e.paddingSize,a=e.borderSize,o=e.sizingStyle,s=o.boxSizing;Object.keys(o).forEach(function(e){var t=e;g.style[t]=o[t]}),h(g),g.value=t;var c=_(g,e);g.value=t,c=_(g,e),g.value=`x`;var l=g.scrollHeight-i,u=l*n;s===`border-box`&&(u=u+i+a),c=Math.max(u,c);var d=l*r;return s===`border-box`&&(d=d+i+a),c=Math.min(d,c),[c,l]}var y=function(){},b=function(e,t){return e.reduce(function(e,n){return e[n]=t[n],e},{})},x=[`borderBottomWidth`,`borderLeftWidth`,`borderRightWidth`,`borderTopWidth`,`boxSizing`,`fontFamily`,`fontSize`,`fontStyle`,`fontWeight`,`letterSpacing`,`lineHeight`,`paddingBottom`,`paddingLeft`,`paddingRight`,`paddingTop`,`tabSize`,`textIndent`,`textRendering`,`textTransform`,`width`,`wordBreak`,`wordSpacing`,`scrollbarGutter`],S=!!document.documentElement.currentStyle,C=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var n=b(x,t),r=n.boxSizing;return r===``?null:(S&&r===`border-box`&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+`px`),{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)})};function w(e,t,n){var r=d(n);l.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var T=function(e,t){w(document.body,`reset`,function(n){e.current.form===n.target&&t(n)})},E=function(e){w(window,`resize`,e)},D=function(e){w(document.fonts,`loadingdone`,e)},O=[`cacheMeasurements`,`maxRows`,`minRows`,`onChange`,`onHeightChange`],k=l.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,i=e.minRows,a=e.onChange,c=a===void 0?y:a,u=e.onHeightChange,d=u===void 0?y:u,f=s(e,O),m=f.value!==void 0,h=l.useRef(null),g=p(h,t),_=l.useRef(0),b=l.useRef(),x=function(){var e=h.current,t=n&&b.current?b.current:C(e);if(t){b.current=t;var a=v(t,e.value||e.placeholder||`x`,i,r),o=a[0],s=a[1];_.current!==o&&(_.current=o,e.style.setProperty(`height`,o+`px`,`important`),d(o,{rowHeight:s}))}};return l.useLayoutEffect(x),T(h,function(){if(!m){var e=h.current.value;requestAnimationFrame(function(){var t=h.current;t&&e!==t.value&&x()})}}),E(x),D(x),l.createElement(`textarea`,o({},f,{onChange:function(e){m||x(),c(e)},ref:g}))}),A=n(),j={size:`sm`},M=i((e,t)=>{let{autosize:n,maxRows:i,minRows:o,__staticSelector:s,resize:l,...u}=r(`Textarea`,j,e),d=n&&c()!==`test`,f=d?{maxRows:i,minRows:o}:{};return(0,A.jsx)(a,{component:d?k:`textarea`,ref:t,...u,__staticSelector:s||`Textarea`,multiline:!0,"data-no-overflow":n&&i===void 0||void 0,__vars:{"--input-resize":l},...f})});M.classes=a.classes,M.displayName=`@mantine/core/Textarea`;export{M as t};